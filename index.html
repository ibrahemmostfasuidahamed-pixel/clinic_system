<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>عيادة أسنان - نظام إدارة العيادة</title>
    <link rel="stylesheet" href="style.css" />
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>

<body>
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
        <div class="logo-container">
            <i class="fas fa-tooth logo-icon"></i>
            <h1 class="logo">عيادة أسنان</h1>
        </div>
        <nav>
            <ul>
                <li><a href="#" data-section="dashboard" class="nav-link active"><i class="fas fa-home"></i> لوحة
                        التحكم</a></li>
                <li><a href="#" data-section="patients" class="nav-link"><i class="fas fa-users"></i> المرضى</a></li>
                <li><a href="#" data-section="appointments" class="nav-link"><i class="fas fa-calendar-check"></i>
                        المواعيد</a></li>
                <li><a href="#" data-section="services" class="nav-link"><i class="fas fa-briefcase-medical"></i>
                        الخدمات</a></li>
                <li><a href="#" data-section="doctors" class="nav-link"><i class="fas fa-user-md"></i> الأطباء</a></li>
                <li><a href="#" data-section="slots" class="nav-link"><i class="fas fa-clock"></i> المواعيد المتاحة</a>
                </li>
                <li><a href="#" data-section="settings" class="nav-link"><i class="fas fa-cog"></i> الإعدادات</a></li>
            </ul>
        </nav>
        <div class="sidebar-footer">
            <p>نظام إدارة العيادة v1.0</p>
        </div>
        <!-- User Menu -->
        <div id="user-menu" class="user-menu">
            <div class="user-avatar">م</div>
            <div class="user-info">
                <div class="user-name">جاري التحميل...</div>
                <div class="user-email"></div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="content">
        <!-- Dashboard Section -->
        <section id="dashboard" class="section active">
            <div class="section-header">
                <h2><i class="fas fa-home"></i> لوحة التحكم</h2>
                <p class="subtitle">مرحباً بك في نظام إدارة عيادة الأسنان</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card patients-stat">
                    <div class="stat-icon"><i class="fas fa-users"></i></div>
                    <div class="stat-info">
                        <h3 id="patients-count">0</h3>
                        <p>المرضى</p>
                    </div>
                </div>
                <div class="stat-card appointments-stat">
                    <div class="stat-icon"><i class="fas fa-calendar-check"></i></div>
                    <div class="stat-info">
                        <h3 id="appointments-count">0</h3>
                        <p>المواعيد اليوم</p>
                    </div>
                </div>
                <div class="stat-card services-stat">
                    <div class="stat-icon"><i class="fas fa-briefcase-medical"></i></div>
                    <div class="stat-info">
                        <h3 id="services-count">0</h3>
                        <p>الخدمات</p>
                    </div>
                </div>
                <div class="stat-card doctors-stat">
                    <div class="stat-icon"><i class="fas fa-user-md"></i></div>
                    <div class="stat-info">
                        <h3 id="doctors-count">0</h3>
                        <p>الأطباء</p>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="card upcoming-appointments">
                    <h3><i class="fas fa-clock"></i> المواعيد القادمة</h3>
                    <div id="upcoming-list" class="list-container">
                        <p class="empty-state">جاري التحميل...</p>
                    </div>
                </div>
                <div class="card recent-patients">
                    <h3><i class="fas fa-user-plus"></i> أحدث المرضى</h3>
                    <div id="recent-patients-list" class="list-container">
                        <p class="empty-state">جاري التحميل...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Patients Section -->
        <section id="patients" class="section">
            <div class="section-header">
                <h2><i class="fas fa-users"></i> إدارة المرضى</h2>
                <button class="btn btn-primary" onclick="openModal('patient-modal')">
                    <i class="fas fa-plus"></i> إضافة مريض جديد
                </button>
            </div>

            <div class="card">
                <div class="table-header">
                    <input type="text" id="patient-search" placeholder="بحث عن مريض..." class="search-input" />
                </div>
                <div class="table-container">
                    <table id="patients-table">
                        <thead>
                            <tr>
                                <th>الاسم</th>
                                <th>الهاتف</th>
                                <th>البريد الإلكتروني</th>
                                <th>العنوان</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody id="patients-tbody">
                            <tr>
                                <td colspan="5" class="empty-state">جاري التحميل...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Appointments Section -->
        <section id="appointments" class="section">
            <div class="section-header">
                <h2><i class="fas fa-calendar-check"></i> إدارة المواعيد</h2>
                <button class="btn btn-primary" onclick="openModal('appointment-modal')">
                    <i class="fas fa-plus"></i> حجز موعد جديد
                </button>
            </div>

            <div class="card">
                <div class="table-header">
                    <input type="date" id="appointment-date-filter" class="date-input" />
                    <select id="appointment-status-filter" class="select-input">
                        <option value="">جميع الحالات</option>
                        <option value="pending">قيد الانتظار</option>
                        <option value="confirmed">مؤكد</option>
                        <option value="completed">مكتمل</option>
                        <option value="cancelled">ملغي</option>
                    </select>
                </div>
                <div class="table-container">
                    <table id="appointments-table">
                        <thead>
                            <tr>
                                <th>المريض</th>
                                <th>الطبيب</th>
                                <th>الخدمة</th>
                                <th>التاريخ والوقت</th>
                                <th>الحالة</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody id="appointments-tbody">
                            <tr>
                                <td colspan="6" class="empty-state">جاري التحميل...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Services Section -->
        <section id="services" class="section">
            <div class="section-header">
                <h2><i class="fas fa-briefcase-medical"></i> إدارة الخدمات</h2>
                <button class="btn btn-primary" onclick="openModal('service-modal')">
                    <i class="fas fa-plus"></i> إضافة خدمة جديدة
                </button>
            </div>

            <div class="services-grid" id="services-grid">
                <div class="empty-state">جاري التحميل...</div>
            </div>
        </section>

        <!-- Available Slots Section -->
        <section id="slots" class="section">
            <div class="section-header">
                <h2><i class="fas fa-clock"></i> إدارة المواعيد المتاحة</h2>
                <button class="btn btn-primary" onclick="openModal('slot-modal')">
                    <i class="fas fa-plus"></i> إضافة موعد متاح
                </button>
            </div>

            <div class="card">
                <div class="table-header">
                    <select id="slot-service-filter" class="select-input" onchange="loadSlots()">
                        <option value="">جميع الخدمات</option>
                    </select>
                    <select id="slot-status-filter" class="select-input" onchange="loadSlots()">
                        <option value="">جميع الحالات</option>
                        <option value="false">متاح</option>
                        <option value="true">محجوز</option>
                    </select>
                </div>
                <div class="table-container">
                    <table id="slots-table">
                        <thead>
                            <tr>
                                <th>الخدمة</th>
                                <th>التاريخ</th>
                                <th>الوقت</th>
                                <th>الحالة</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody id="slots-tbody">
                            <tr>
                                <td colspan="5" class="empty-state">جاري التحميل...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Doctors Section -->
        <section id="doctors" class="section">
            <div class="section-header">
                <h2><i class="fas fa-user-md"></i> إدارة الأطباء</h2>
                <button class="btn btn-primary" onclick="openModal('doctor-modal')">
                    <i class="fas fa-plus"></i> إضافة طبيب جديد
                </button>
            </div>

            <div class="doctors-grid" id="doctors-grid">
                <div class="empty-state">جاري التحميل...</div>
            </div>
        </section>

        <!-- Settings Section -->
        <section id="settings" class="section">
            <div class="section-header">
                <h2><i class="fas fa-cog"></i> الإعدادات</h2>
            </div>

            <div class="card settings-card">
                <h3><i class="fas fa-database"></i> إعدادات Supabase</h3>
                <form id="supabase-settings-form">
                    <div class="form-group">
                        <label for="supabase-url">Supabase URL</label>
                        <input type="url" id="supabase-url" placeholder="https://your-project.supabase.co" />
                    </div>
                    <div class="form-group">
                        <label for="supabase-key">Supabase Anon Key</label>
                        <input type="text" id="supabase-key" placeholder="your-anon-key" />
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> حفظ الإعدادات
                    </button>
                </form>
                <div id="connection-status" class="connection-status">
                    <span class="status-indicator disconnected"></span>
                    <span>غير متصل</span>
                </div>
            </div>

            <div class="card settings-card">
                <h3><i class="fas fa-robot"></i> إعدادات n8n AI</h3>
                <form id="n8n-settings-form">
                    <div class="form-group">
                        <label for="n8n-webhook">رابط Webhook</label>
                        <input type="url" id="n8n-webhook" placeholder="https://your-n8n.com/webhook/clinic-ai" />
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> حفظ
                    </button>
                </form>
            </div>
        </section>
    </main>

    <!-- Modals -->
    <!-- Patient Modal -->
    <div id="patient-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-plus"></i> <span id="patient-modal-title">إضافة مريض جديد</span></h3>
                <button class="close-btn" onclick="closeModal('patient-modal')">&times;</button>
            </div>
            <form id="patient-form">
                <input type="hidden" id="patient-id" />
                <div class="form-group">
                    <label for="patient-name">الاسم الكامل *</label>
                    <input type="text" id="patient-name" required />
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="patient-phone">رقم الهاتف</label>
                        <input type="tel" id="patient-phone" />
                    </div>
                    <div class="form-group">
                        <label for="patient-email">البريد الإلكتروني</label>
                        <input type="email" id="patient-email" />
                    </div>
                </div>
                <div class="form-group">
                    <label for="patient-address">العنوان</label>
                    <input type="text" id="patient-address" />
                </div>
                <div class="form-group">
                    <label for="patient-notes">ملاحظات</label>
                    <textarea id="patient-notes" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('patient-modal')">إلغاء</button>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> حفظ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Appointment Modal -->
    <div id="appointment-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-calendar-plus"></i> <span id="appointment-modal-title">حجز موعد جديد</span></h3>
                <button class="close-btn" onclick="closeModal('appointment-modal')">&times;</button>
            </div>
            <form id="appointment-form">
                <input type="hidden" id="appointment-id" />
                <div class="form-group">
                    <label for="appointment-patient">المريض *</label>
                    <select id="appointment-patient" required></select>
                </div>
                <div class="form-group">
                    <label for="appointment-doctor">الطبيب *</label>
                    <select id="appointment-doctor" required></select>
                </div>
                <div class="form-group">
                    <label for="appointment-service">الخدمة *</label>
                    <select id="appointment-service" required></select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="appointment-date">التاريخ *</label>
                        <input type="date" id="appointment-date" required />
                    </div>
                    <div class="form-group">
                        <label for="appointment-time">الوقت *</label>
                        <input type="time" id="appointment-time" required />
                    </div>
                </div>
                <div class="form-group">
                    <label for="appointment-status">الحالة</label>
                    <select id="appointment-status">
                        <option value="pending">قيد الانتظار</option>
                        <option value="confirmed">مؤكد</option>
                        <option value="completed">مكتمل</option>
                        <option value="cancelled">ملغي</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="appointment-notes">ملاحظات</label>
                    <textarea id="appointment-notes" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary"
                        onclick="closeModal('appointment-modal')">إلغاء</button>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> حفظ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Service Modal -->
    <div id="service-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-briefcase-medical"></i> <span id="service-modal-title">إضافة خدمة جديدة</span></h3>
                <button class="close-btn" onclick="closeModal('service-modal')">&times;</button>
            </div>
            <form id="service-form">
                <input type="hidden" id="service-id" />
                <div class="form-group">
                    <label for="service-name">اسم الخدمة *</label>
                    <input type="text" id="service-name" required />
                </div>
                <div class="form-group">
                    <label for="service-price">السعر (ج.م) *</label>
                    <input type="number" id="service-price" step="0.01" required />
                </div>
                <div class="form-group">
                    <label for="service-description">الوصف</label>
                    <textarea id="service-description" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('service-modal')">إلغاء</button>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> حفظ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Doctor Modal -->
    <div id="doctor-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-md"></i> <span id="doctor-modal-title">إضافة طبيب جديد</span></h3>
                <button class="close-btn" onclick="closeModal('doctor-modal')">&times;</button>
            </div>
            <form id="doctor-form">
                <input type="hidden" id="doctor-id" />
                <div class="form-group">
                    <label for="doctor-name">اسم الطبيب *</label>
                    <input type="text" id="doctor-name" required />
                </div>
                <div class="form-group">
                    <label for="doctor-specialty">التخصص</label>
                    <input type="text" id="doctor-specialty" />
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="doctor-phone">رقم الهاتف</label>
                        <input type="tel" id="doctor-phone" />
                    </div>
                    <div class="form-group">
                        <label for="doctor-email">البريد الإلكتروني</label>
                        <input type="email" id="doctor-email" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('doctor-modal')">إلغاء</button>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> حفظ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Slot Modal -->
    <div id="slot-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-clock"></i> <span id="slot-modal-title">إضافة موعد متاح</span></h3>
                <button class="close-btn" onclick="closeModal('slot-modal')">&times;</button>
            </div>
            <form id="slot-form">
                <input type="hidden" id="slot-id" />
                <div class="form-group">
                    <label for="slot-service">الخدمة *</label>
                    <select id="slot-service" required></select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="slot-date">التاريخ *</label>
                        <input type="date" id="slot-date" required />
                    </div>
                    <div class="form-group">
                        <label for="slot-time">الوقت *</label>
                        <input type="time" id="slot-time" required />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('slot-modal')">إلغاء</button>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> حفظ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="app.js"></script>
</body>

</html>